<html>

<head>
	<meta name="viewport" content="width=device-width, initial-scale=0.4">
	<style>
	input[type=number] {
		text-align: right;
	}
	
	input[type=text] {
		text-align: left;
	}
	
	table {
		width: 100%;
	}
	</style>

<script src="mycad.js">
</script>
<title>myCAD example with BeamColEndplate Joint</title>
</head>
<div>

	<body onload="Init()">
		<button onclick="updateJoint()">Redraw Joint</button>
		<!-- <button onclick="printDiv('printableArea')">Print</button> -->
		<button id="zoomin" onclick="changeZoomValue(0.1)">[&#x1F50D;+]</button>
		<button id="zoomout" onclick="changeZoomValue(-0.1)">[&#x1F50D;-]</button>
		<input id="lfac" name="lfac" type="number" value="1" /> </div>
<div id="printableArea">
	<canvas id='canvas' width="1000" height="1000"></canvas>
	<table>
		<caption> Beam Column Endplate Connection (AISC,ASTM,ASD)</caption>
		<tr>
			<th colspan="3">Beam Column Data</th>
		</tr>
		<tr>
			<th colspan="3">Beam Sectional Parameters:</th>
		</tr>
		<tr>
			<td>Depth</td>
			<td> Beam.d = </td>
			<td>
				<input name="Beam.d" type="number" value="406" />
			</td>
			<td>mm</td>
		</tr>
		<tr>
			<td>Width</td>
			<td> Beam.bf = </td>
			<td>
				<input name="Beam.bf" type="number" value="178" />
			</td>
			<td>mm</td>
		</tr>
		<tr>
			<td>Flang Thickness</td>
			<td> Beam.tf = </td>
			<td>
				<input name="Beam.tf" type="number" value="13" />
			</td>
			<td>mm</td>
		</tr>
		<tr>
			<td>Web Thickness</td>
			<td> Beam.tw = </td>
			<td>
				<input name="Beam.tw" type="number" value="8" />
			</td>
			<td>mm</td>
		</tr>
		<tr>
			<td>k</td>
			<td> Beam.k = </td>
			<td>
				<input name="Beam.k" type="number" value="23" />
			</td>
			<td>mm</td>
		</tr>
		<tr>
			<td>Beam Yield Stress,</td>
			<td> Fyb = </td>
			<td>
				<input name="Fyb" type="number" value="248" />
			</td>
			<td>N/mm²</td>
		</tr>
		<tr>
			<th colspan="3">Column Sectional Parameters:</th>
		</tr>
		<tr>
			<td>Depth</td>
			<td> C.d = </td>
			<td>
				<input name="C.d" type="number" value="356" />
			</td>
			<td>mm</td>
		</tr>
		<tr>
			<td>Width</td>
			<td> C.bf = </td>
			<td>
				<input name="C.bf" type="number" value="368" />
			</td>
			<td>mm</td>
		</tr>
		<tr>
			<td>Flang Thickness</td>
			<td> C.tf = </td>
			<td>
				<input name="C.tf" type="number" value="18" />
			</td>
			<td>mm</td>
		</tr>
		<tr>
			<td>Web Thickness</td>
			<td> C.tw = </td>
			<td>
				<input name="C.tw" type="number" value="11.176" />
			</td>
			<td>mm</td>
		</tr>
		<tr>
			<td>k</td>
			<td> C.k = </td>
			<td>
				<input name="C.k" type="number" value="33" />
			</td>
			<td>mm</td>
		</tr>
		<tr>
			<td>k1</td>
			<td> C.k1 = </td>
			<td>
				<input name="C.k1" type="number" value="37" />
			</td>
			<td>mm</td>
		</tr>
		<tr>
			<td>Column Yield Stress,</td>
			<td> Fyc = </td>
			<td>
				<input name="Fyc" type="number" value="248" />
			</td>
			<td>N/mm²</td>
		</tr>
		<tr>
			<th colspan="3">Connection Loadings:</th>
		</tr>
		<tr>
			<td>Beam End Moment,</td>
			<td> M = </td>
			<td>
				<input name="M" type="number" type="number" value="162.7" />
			</td>
			<td>kN-M</td>
		</tr>
		<tr>
			<td>Moment Includes Wind or Seismic? No </td>
		</tr>
		<tr>
			<td>Beam End Reaction (Shear),</td>
			<td> R = </td>
			<td>
				<input name="R" type="number" value="133.446648" />
			</td>
			<td>kN</td>
		</tr>
		<tr>
			<td>Beam Axial Force,</td>
			<td> P = </td>
			<td>
				<input name="P" type="number" value="44.482216" />
			</td>
			<td>kN</td>
		</tr>
		<tr>
			<th colspan="3">Connection Data and Parameters:</th>
		</tr>
		<tr>
			<td>End Plate Length,</td>
			<td> Lp = </td>
			<td>
				<input name="Lp" type="number" value="553" />
			</td>
			<td>mm</td>
		</tr>
		<tr>
			<td>End Plate Width,</td>
			<td> Bp = </td>
			<td>
				<input name="Bp" type="number" value="203" />
			</td>
			<td> mm</td>
		</tr>
		<tr>
			<td>End Plate Thickness,</td>
			<td> tp = </td>
			<td>
				<input name="tp" type="number" value="19" />
			</td>
			<td>mm</td>
		</tr>
		<tr>
			<td>End Plate Yield Stress,</td>
			<td> Fyp = </td>
			<td>
				<input name="Fyp" type="number" value="248" />
			</td>
			<td>N/mm²</td>
		</tr>
		<tr>
			<td>ASTM Bolt Desig. (A325 or A490) = A325 </td>
		</tr>
		<tr>
			<td>Bolt Type (N, X, or SC) = N </td>
		</tr>
		<tr>
			<td>Bolt Hole Type (in End Plate) = Standard </td>
		</tr>
		<tr>
			<td>Diameter of Bolts,</td>
			<td> db = </td>
			<td>
				<input name="db" type="number" value="22" />
			</td>
			<td>mm</td>
		</tr>
		<tr>
			<td>Total Number of Bolts,</td>
			<td> Nb = </td>
			<td>
				<input name="Nb" type="number" value="8" />
			</td>
			<td>#</td>
		</tr>
		<tr>
			<td>Tension Bolts Vertical Spacing,</td>
			<td> S = </td>
			<td>
				<input name="S" type="number" value="83" />
			</td>
			<td>mm</td>
		</tr>
		<tr>
			<td>Dist. to Outer Tension Bolts,</td>
			<td> D1 = </td>
			<td>
				<input name="D1" type="number" value="35" />
			</td>
			<td>mm</td>
		</tr>
		<tr>
			<td>Bolt Gage in Column,</td>
			<td> g = </td>
			<td>
				<input name="g" type="number" value="149" />
			</td>
			<td>mm</td>
		</tr>
		<tr>
			<td>Edge Distance for End Plate,</td>
			<td> ED = </td>
			<td>
				<input name="ED" type="number" value="38" />
			</td>
			<td>mm</td>
		</tr>
		<tr>
			<td>Col. Web Doubler Plate Thk.,</td>
			<td> td = </td>
			<td>
				<input name="td" type="number" value="9.5" />
			</td>
			<td>mm</td>
		</tr>
		<tr>
			<td>Doubler Plate Yield Stress,</td>
			<td> Fyd = </td>
			<td>
				<input name="Fyd" type="number" value="245" />
			</td>
			<td>N/mm²</td>
		</tr>
		<tr>
			<td>Stiffener Plate Thickness,</td>
			<td> ts = </td>
			<td>
				<input name="ts" type="number" value="13" />
			</td>
			<td>mm</td>
		</tr>
		<tr>
			<td>Stiffener Plate Yield Stress,</td>
			<td> Fys = </td>
			<td>
				<input name="Fys" type="number" value="248" />
			</td>
			<td>N/mm²</td>
		</tr>
		<tr>
			<td>Full-Depth or Half-Depth Stiffeners? Full-Depth </td>
		</tr>
		<tr>
			<td>Beam bottom slope</td>
			<td> beamBotSlope = </td>
			<td>
				<input name="beamBotSlope" type="number" value="0.1" />
			</td>
			<td></td>
		</tr>
	</table>
	<div id="info"></div>
	<p>End of calculation.</p>
</div>

<script>
var mycad = null;

function Init() {
	mycad = new myCAD();
	mycad.update(drawJoint);
	
}

function updateJoint() {
	mycad.update(drawJoint);
}

function changeZoomValue(o) {
	var val = document.getElementById('lfac').value;
	document.getElementById('lfac').value = parseFloat(val) + o;
	mycad.update(drawJoint);
}

function drawJoint(ctx, mycad) {
		var D1 = 40,
			ED = 75,
			S = 85,
			tp = 22,
			ts = 13,
			td = 9.5,
			Bp = 200,
			db = 22,
			g = 100;
		var lfac = 1;
		var boltType = "A325";
		var beamBotSlope = 1.0 / 4;
		var x = 350,
			y = 350;
		var Beam = {
				"d": 400,
				"tw": 10,
				"bf": 154,
				"tf": 13,
				"k": 24
			}
			//Column:
		var C = {
			"d": 350,
			"tw": 14,
			"bf": 315,
			"tf": 20,
			"k": 31,
			"k1": 34
		}

		
		var elmts = document.getElementsByTagName("input");
		var L = elmts.length;
		for(var i = 0; i < L; i++) {
			try {
				eval(elmts[i].name + "=" + elmts[i].value);
			} catch(e) {}
		}
		var lp = 2 * (D1 + ED) + Beam.d;
		
		ctx.save();
		ctx.setTransform(0.5 * lfac, 0, 0, 0.5 * lfac, 0, 0);
		ctx.translate(x / lfac, y / lfac);
		ctx.fillStyle = "rgba(200, 255, 255, 0.4)";
		ctx.strokeStyle = "#555";
		ctx.setLineDash(mycad.linePattern.dashdot2);
		ctx.lineWidth = 2;
		mycad.drawLine(ctx, 0, -(D1 + ED + 150), 0, lp + 150);
		mycad.drawLine(ctx, C.d / 2 - C.tf - 25, -D1, C.d / 2 + tp + 25, -D1);
		mycad.drawLine(ctx, C.d / 2 - C.tf - 25, -D1 + S, C.d / 2 + tp + 25, -D1 + S);
		mycad.drawLine(ctx, C.d / 2 - C.tf - 25, Beam.d + D1, C.d / 2 + tp + 25, Beam.d + D1);
		mycad.drawLine(ctx, C.d / 2 - C.tf - 25, Beam.d + D1 - S, C.d / 2 + tp + 25, Beam.d + D1 - S);
		mycad.drawLine(ctx, C.d / 2 - C.tf - 25, Beam.d / 2 - S / 2, C.d / 2 + tp + 25, Beam.d / 2 - S / 2);
		mycad.drawLine(ctx, C.d / 2 - C.tf - 25, Beam.d / 2 + S / 2, C.d / 2 + tp + 25, Beam.d / 2 + S / 2);
		ctx.setLineDash(mycad.linePattern.cont);
		ctx.strokeStyle = "#000";
		ctx.lineWidth = 3;
		mycad.drawLine(ctx, -C.d / 2, -(D1 + ED + 100), -C.d / 2, lp + 100);
		mycad.drawLine(ctx, -C.d / 2 + C.tf, -(D1 + ED + 100), -C.d / 2 + C.tf, lp + 100);
		mycad.drawLine(ctx, C.d / 2, -(D1 + ED + 100), C.d / 2, lp + 100);
		mycad.drawLine(ctx, C.d / 2 - C.tf, -(D1 + ED + 100), C.d / 2 - C.tf, lp + 100);
		mycad.drawHContinueLine(ctx, 0, -(D1 + ED + 100), C.d + 200);
		mycad.drawHContinueLine(ctx, 0, (lp + 100), C.d + 200);
		mycad.drawFillRect(ctx, 0 - C.d / 2 + C.tf, 0, C.d - 2 * C.tf, ts);
		mycad.drawFillRect(ctx, 0 - C.d / 2 + C.tf, Beam.d - ts, C.d - 2 * C.tf, ts);
		mycad.centerText(ctx, 0, Beam.d + 120, "Column", 48 / lfac);
		mycad.centerText(ctx, 0, Beam.d + 180, mycad.sectionName(C), 48 / lfac);
		mycad.weldLeader(ctx, 0, Beam.tf, 100, 300, 100, 6, "E70 SMAW", 0, Beam.d - 2 * ts);
		mycad.drawRect(ctx, C.d / 2, -(D1 + ED), tp, lp);
		mycad.drawLineWithArrows(ctx, C.d / 2 + tp, Beam.d / 2, C.d / 2 + tp + Beam.d, -ED - D1, 10, 24, true, false);
		mycad.drawLineWithArrows(ctx, C.d / 2 + tp + Beam.d * 2 + C.bf / 2 - Bp / 2, Beam.d / 2, C.d / 2 + tp + Beam.d, -ED - D1, 10, 24, true, false);
		mycad.centerText(ctx, C.d / 2 + tp + Beam.d, -ED - D1, "End Plate " + tp + " mm thick", 48 / lfac);
		mycad.weldLeader(ctx, C.d / 2 + tp, Beam.d - 100, 200, 200, 200, 6, "E70 SMAW");
		var dy = Beam.d * 2 * beamBotSlope;
		mycad.drawLine(ctx, C.d / 2 + tp, 0, C.d / 2 + tp + Beam.d * 2, 0);
		mycad.drawLine(ctx, C.d / 2 + tp, Beam.tf, C.d / 2 + tp + Beam.d * 2, Beam.tf);
		mycad.drawLine(ctx, C.d / 2 + tp, Beam.d, C.d / 2 + tp + Beam.d * 2, Beam.d - dy);
		mycad.drawLine(ctx, C.d / 2 + tp, Beam.d - Beam.tf, C.d / 2 + tp + Beam.d * 2, Beam.d - Beam.tf - dy);
		mycad.centerText(ctx, C.d / 2 + tp + Beam.d, Beam.d / 2, "Beam", 48 / lfac);
		mycad.centerText(ctx, C.d / 2 + tp + Beam.d, Beam.d / 2 + 60, mycad.sectionName(Beam), 48 / lfac);
		mycad.drawContinueLine(ctx, C.d / 2 + tp + Beam.d * 2, Beam.d + 100 - dy, C.d / 2 + tp + Beam.d * 2, -100);
		mycad.drawFillRect(ctx, C.d / 2 - C.tf, -D1 - db / 2, C.tf + tp, db);
		mycad.drawFillRect(ctx, C.d / 2 - C.tf, -D1 + S - db / 2, C.tf + tp, db);
		mycad.drawFillRect(ctx, C.d / 2 - C.tf, Beam.d + D1 - db / 2, C.tf + tp, db);
		mycad.drawFillRect(ctx, C.d / 2 - C.tf, Beam.d + D1 - S - db / 2, C.tf + tp, db);
		mycad.drawFillRect(ctx, C.d / 2 - C.tf, Beam.d / 2 - S / 2 - db / 2, C.tf + tp, db);
		mycad.drawFillRect(ctx, C.d / 2 - C.tf, Beam.d / 2 + S / 2 - db / 2, C.tf + tp, db);
		//col section
		var xc = 0,
			yc = lp + 100 + C.bf;
		mycad.Hsection(ctx, 0, yc, 90, C.bf, C.d, C.tw, C.tf, 10);
		mycad.drawRect(ctx, xc + C.d / 2, yc - Bp / 2, tp, Bp);
		mycad.drawFillRect(ctx, xc + C.d / 2 - C.tf, yc - g / 2 - db / 2 - 4, C.tf + tp, db);
		mycad.drawFillRect(ctx, xc + C.d / 2 - C.tf, yc + g / 2 - db / 2 - 4, C.tf + tp, db);
		mycad.drawFillRect(ctx, xc - C.d / 2 + C.tf + 6, yc - C.tw / 2 - td, C.d - 2 * (C.tf + 6), td);
		mycad.drawFillRect(ctx, xc - C.d / 2 + C.tf + 6, yc + C.tw / 2, C.d - 2 * (C.tf + 6), td);
		mycad.drawLeader(ctx, xc + C.d / 4, yc + C.tw / 2 + td, 0, C.d, C.bf / 2 + 20, "Web doubler plate " + td + " mm thick");
		mycad.drawLine(ctx, xc - C.d / 2 + C.tf, yc - Bp / 2, xc + C.d / 2 + C.tf, yc - Bp / 2);
		mycad.drawLine(ctx, xc - C.d / 2 + C.tf, yc + Bp / 2, xc + C.d / 2 + C.tf, yc + Bp / 2);
		mycad.drawLine(ctx, xc + C.d / 2 + tp, yc + Beam.bf / 2, xc + C.d / 2 + tp + Beam.d * 2, yc + Beam.bf / 2);
		mycad.drawLine(ctx, xc + C.d / 2 + tp, yc - Beam.bf / 2, xc + C.d / 2 + tp + Beam.d * 2, yc - Beam.bf / 2);
		mycad.drawContinueLine(ctx, xc + C.d / 2 + tp + Beam.d * 2, yc + Beam.bf / 2 + 100, xc + C.d / 2 + tp + Beam.d * 2, yc - Beam.bf / 2 - 100);
		mycad.centerText(ctx, C.d / 2 + tp + Beam.d, yc - 30, "Beam", 48 / lfac);
		mycad.centerText(ctx, C.d / 2 + tp + Beam.d, yc + 30, mycad.sectionName(Beam), 48 / lfac);
		mycad.drawLineWithArrows(ctx, xc, yc - Bp / 2, xc + C.d / 2 + tp, yc - C.bf / 2 - 80, 10, 24, true, false);
		mycad.drawLine(ctx, xc + C.d / 2 + tp, yc - C.bf / 2 - 80, xc + C.d / 2 + 120, yc - C.bf / 2 - 80);
		mycad.leftText(ctx, xc + C.d / 2 + 120, yc - C.bf / 2 - 80, "Stiffener " + ts + " mm thick", 48 / lfac);
		mycad.drawRoDim(ctx, xc - C.d / 2, yc + C.bf / 2, xc + C.d / 2, yc + C.bf / 2, 80);
		mycad.drawRoDim(ctx, xc + C.d / 2, yc + Bp / 2, xc + C.d / 2, yc - Bp / 2, 80);
		mycad.drawRoDim(ctx, xc + C.d / 2, yc + C.bf / 2, xc + C.d / 2, yc - C.bf / 2, 120);
		//beam section
		var xc = tp + 50 + C.d / 2 + Beam.d * 2 + C.bf / 2;
		var yc = Beam.d / 2;
		mycad.drawLine(ctx, xc - C.bf / 2, yc - Beam.d / 2 - (D1 + ED + 100), xc - C.bf / 2, yc - Beam.d / 2 + lp + 100);
		mycad.drawLine(ctx, xc + C.bf / 2, yc - Beam.d / 2 - (D1 + ED + 100), xc + C.bf / 2, yc - Beam.d / 2 + lp + 100);
		mycad.Hsection(ctx, xc, Beam.d / 2, 0, Beam.bf, Beam.d, Beam.tw, Beam.tf, 10);
		mycad.drawRect(ctx, xc - Bp / 2, -D1 - ED, Bp, lp);
		mycad.drawRoDim(ctx, xc - Bp / 2, yc + lp / 2, xc + Bp / 2, yc + lp / 2, 80);
		mycad.centerText(ctx, xc, yc + lp / 2 + D1 + ED + 160, "End Plate " + Bp + "x" + lp + "x" + tp, 48 / lfac);
		mycad.centerText(ctx, xc, yc + lp / 2 + D1 + ED + 220, boltType + " Type " + db + " Φmm Bolts", 48 / lfac);
		var vdimL = (C.bf - Bp) / 2 + 80;
		mycad.drawRoDim(ctx, xc + Bp / 2, yc + lp / 2, xc + Bp / 2, yc + lp / 2 - ED, vdimL);
		mycad.drawRoDim(ctx, xc + Bp / 2, yc + lp / 2 - ED, xc + Bp / 2, yc + lp / 2 - ED - S, vdimL);
		mycad.drawRoDim(ctx, xc + Bp / 2, yc + lp / 2 - ED - S, xc + Bp / 2, yc - lp / 2 + ED + S, vdimL);
		mycad.drawRoDim(ctx, xc + Bp / 2, yc - lp / 2 + ED + S, xc + Bp / 2, yc - lp / 2 + ED, vdimL);
		mycad.drawRoDim(ctx, xc + Bp / 2, yc - lp / 2 + ED, xc + Bp / 2, yc - lp / 2, vdimL);
		mycad.drawRoDim(ctx, xc + Bp / 2, yc + lp / 2, xc + Bp / 2, yc - lp / 2, vdimL + 40);
		mycad.drawHContinueLine(ctx, xc, yc - Beam.d / 2 - (D1 + ED + 100), C.bf + 200);
		mycad.drawHContinueLine(ctx, xc, yc + lp / 2 + D1 + ED + 100, C.bf + 200);
		mycad.drawFillCircle(ctx, xc - g / 2, yc - Beam.d / 2 - D1, db / 2 + 4);
		mycad.drawFillCircle(ctx, xc + g / 2, yc - Beam.d / 2 - D1, db / 2 + 4);
		mycad.drawFillCircle(ctx, xc - g / 2, yc - Beam.d / 2 - D1 + S, db / 2 + 4);
		mycad.drawFillCircle(ctx, xc + g / 2, yc - Beam.d / 2 - D1 + S, db / 2 + 4);
		mycad.drawFillCircle(ctx, xc - g / 2, yc - S / 2, db / 2 + 4);
		mycad.drawFillCircle(ctx, xc - g / 2, yc + S / 2, db / 2 + 4);
		mycad.drawFillCircle(ctx, xc + g / 2, yc - S / 2, db / 2 + 4);
		mycad.drawFillCircle(ctx, xc + g / 2, yc + S / 2, db / 2 + 4);
		mycad.drawRoDim(ctx, xc - g / 2, yc - Beam.d / 2 - D1, xc + g / 2, yc - Beam.d / 2 - D1, -ED - 80);
		mycad.drawFillCircle(ctx, xc - g / 2, yc + Beam.d / 2 + D1, db / 2 + 4);
		mycad.drawFillCircle(ctx, xc + g / 2, yc + Beam.d / 2 + D1, db / 2 + 4);
		mycad.drawFillCircle(ctx, xc - g / 2, yc + Beam.d / 2 + D1 - S, db / 2 + 4);
		mycad.drawFillCircle(ctx, xc + g / 2, yc + Beam.d / 2 + D1 - S, db / 2 + 4);
		mycad.drawPoint(ctx, xc - g / 2, yc - Beam.d / 2 - D1, db + 16);
		mycad.drawPoint(ctx, xc + g / 2, yc - Beam.d / 2 - D1, db + 16);
		mycad.drawPoint(ctx, xc - g / 2, yc - Beam.d / 2 - D1 + S, db + 16);
		mycad.drawPoint(ctx, xc + g / 2, yc - Beam.d / 2 - D1 + S, db + 16);
		mycad.drawPoint(ctx, xc - g / 2, yc + Beam.d / 2 + D1, db + 16);
		mycad.drawPoint(ctx, xc + g / 2, yc + Beam.d / 2 + D1, db + 16);
		mycad.drawPoint(ctx, xc - g / 2, yc + Beam.d / 2 + D1 - S, db + 16);
		mycad.drawPoint(ctx, xc + g / 2, yc + Beam.d / 2 + D1 - S, db + 16);
		mycad.drawPoint(ctx, xc - g / 2, yc - S / 2, db + 16);
		mycad.drawPoint(ctx, xc - g / 2, yc + S / 2, db + 16);
		mycad.drawPoint(ctx, xc + g / 2, yc - S / 2, db + 16);
		mycad.drawPoint(ctx, xc + g / 2, yc + S / 2, db + 16);
		ctx.restore();
	}
</script>
</body>

</html>